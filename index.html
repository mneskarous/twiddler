<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link href="main.css" rel="stylesheet">
  </head>
  <body>
    <div class="container">
      <header>
        <h1 class="title">Twiddler</h1>
      </header>
      <button id="home" class="btn">Home</button>
      <div class="main-feed">
        <section class="old-tweets"></section>
        <section class="new-tweets"></section>
      </div>
      <button id="new" class="btn">See New Tweets</button>

      <script>
        $(document).ready(function() {

          // Refactored old tweet section
          var $body = $('.main-feed');
          // $tweets.html('');

          var index = streams.home.length - 1;
          while(index >= 0) {
            var tweet = streams.home[index];
            var $tweet = $('<div class=tweet></div>');
            var $user = $('<p class=user></p>');
            var $message = $('<p class=message></p>');
            var $time = $('<p class=time></p>');

            $tweet.appendTo('.old-tweets');
            $user.addClass(tweet.user).addClass('link').text('@' + tweet.user).appendTo($tweet);
            $message.text(tweet.message).appendTo($tweet);
            $time.text(tweet.created_at).appendTo($tweet);
            // $tweet.text('@' + tweet.user + ': ' + tweet.message + ' ' + tweet.created_at);

            index -= 1;
          }

          // Button to see new tweets
          $('#new').click(function() {
            var randomNumberOfTweets = Math.floor(Math.random() * Math.floor(8));

            for (var i = 0; i <= randomNumberOfTweets; i++) {
              generateRandomTweet();

              var newTweet = streams.home.pop();
              var $newTweet = $('<div class=tweet></div>');
              var $newUser = $('<p class=user></p>');
              var $newMessage = $('<p class=message></p>');
              var $newTime = $('<p class=time></p>');

              $newTweet.appendTo('.new-tweets');
              $newUser.addClass(newTweet.user).addClass('link').text('@' + newTweet.user).appendTo($newTweet);
              $newMessage.text(newTweet.message).appendTo($newTweet);
              $newTime.text(newTweet.created_at).appendTo($newTweet);
            }
          });

          // Button to return to main feed
          $('#home').click(function() {
            $('.old-tweets').show();
            $('.new-tweets').show();
            $('#new').show();
          });

          // Filter timeline to show tweets from user's timeline
          // function filterTweetsByUser(user) {
          //   if (user === 'user') {
          //     $('.tweet').show();
          //   } else {
          //     $('.tweet').hide();
          //   }
          //   $('#new').hide();
          //   // $homeButton.show();
          // }

          // Click on username to see the user's timeline
          $('body').on('click', '.tweet .user', function() {
            var user = $(this).closest('tweet').data('user');
            $('.old-tweets').hide();
            $('.new-tweets').hide();
            $('#new').hide();
            // filterTweetsByUser(user);
          });





        });

      </script>
    </div>


  </body>

</html>
